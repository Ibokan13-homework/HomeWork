<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<title>Document</title>
	<style type="text/css">
		#wrap {
			position: fixed;
			right: 6%;
			top: 15%;
			z-index: 2;
			width: 100px;
			height: 100px;
			margin: -50px -50px 0 0;
			border-radius: 50px;
			/*margin: -100px -100px 0 0;*/
			background-color: red;
		}
		.con {
			position: absolute;
			left: 50%;
			top: 50%;
			z-index: 1;
			display: none;
			width: 300px;
			height: 200px;
			margin: -100px 0 0 -150px;
		}
		.show {
			display: block;
		}
		.con div {
			position: absolute;
			z-index: 1;
			width: 150px;
			height: 100px;
			overflow: hidden;
			opacity: 0;
		}
		.l-t {
			left: 0;
			top: 0;
			z-index: 4;
			border-top-left-radius: 30px;
			background-color: red;
		}
		.l-b {
			left: 0;
			top: 100px;
			z-index: 3;
			border-bottom-left-radius: 30px;
			background-color: blue;
		}
		.r-t {
			left: 150px;
			top: 0;
			z-index: 2;
			border-top-right-radius: 30px;
			background-color: green;
		}
		.r-b {
			left: 150px;
			top: 100px;
			z-index: 1;
			border-bottom-right-radius: 30px;
			background-color: yellow;
		}
	</style>
</head>
<body>
	<div id="wrap" class="h h"></div>
	<div id="con" class="con">
		<div class="l-t"></div>
		<div class="r-t"></div>
		<div class="r-b"></div>
		<div class="l-b"></div>
	</div>
	<!-- <script type="text/javascript" src="kHelp-0.2.js"></script> -->
	<script type="text/javascript" src="js/tween.js"></script>
	<script type="text/javascript" src="js/kHelp-0.3.js"></script>
	<script type="text/javascript">
		var wrap = $id('wrap'),
			con  = $id('con'),
			divs = $tag('div',con),
			// lT = divs[0],
			// lB = divs[1],
			// rT = divs[2],
			// rB = divs[3],
			bClick = true,
			tw = 'Back',
			time = 30;
		wrap.onclick = function() {
			if ( bClick ) {
				$tweenEffect(this,{
					attr: 'right',
					end: 50,
					unit: '%',
					dur: time,
					twFn: tw
				});
				$tweenEffect(this,{
					attr: 'top',
					end: 50,
					unit: '%',
					dur: time,
					twFn: tw,
					endFun: showCon
				})
				$addClass(con,'show');
				bClick = false;
			} else {
				hideCon();
				bClick = true;
			}
		}
		var conTime = 10;
		function hideCon() {
			$tweenEffect(divs[3],{
				attr: 'width',
				end: 0,
				dur: conTime,
				endFun: function() {
					$tweenEffect(divs[2],{
						attr: 'height',
						end: 0,
						dur: conTime,
						endFun: function() {
							$tweenEffect(divs[1],{
								attr: 'width',
								end: 0,
								dur: conTime,
								endFun: function() {
									$tweenEffect(divs[0],{
										attr: 'height',
										end: 0,
										dur: conTime,
										endFun: function() {
											$tweenEffect(wrap,{
												attr: 'right',
												end: 6,
												unit: '%',
												dur: time,
												twFn: tw
											});
											$tweenEffect(wrap,{
												attr: 'top',
												end: 15,
												unit: '%',
												dur: time,
												twFn: tw
											})
										}
									})
								}
							})
						}
					})
				}
			})
			$tweenEffect(divs[3],{
				attr: 'left',
				end: 150,
				dur: conTime,
				endFun: function() {
					$tweenEffect(divs[2],{
						attr: 'top',
						end: 100,
						dur: conTime,
						endFun: function() {
							$tweenEffect(divs[1],{
								attr: 'left',
								end: 150,
								dur: conTime,
								endFun: function() {
									$tweenEffect(divs[0],{
										attr: 'top',
										end: 100,
										dur: conTime
									})
								}
							})
						}
					})
				}
			})
			$tweenEffect(divs[3],{
				attr: 'opacity',
				end: 0,
				dur: conTime,
				endFun: function() {
					$tweenEffect(divs[2],{
						attr: 'opacity',
						end: 0,
						dur: conTime,
						endFun: function() {
							$tweenEffect(divs[1],{
								attr: 'opacity',
								end: 0,
								dur: conTime,
								endFun: function() {
									$tweenEffect(divs[0],{
										attr: 'opacity',
										end: 0,
										dur: conTime
									})
								}
							})
						}
					})
				}
			})
		}
		function showCon() {
			zeroSize();
			hidePos();
			$tweenEffect(divs[0],{
				attr: 'height',
				end: 100,
				dur: conTime,
				endFun: function() {
					$tweenEffect(divs[1],{
						attr: 'width',
						end: 150,
						dur: conTime,
						endFun: function() {
							$tweenEffect(divs[2],{
								attr: 'height',
								end: 100,
								dur: conTime,
								endFun: function() {
									$tweenEffect(divs[3],{
										attr: 'width',
										end: 150,
										dur: conTime
									})
								}
							})
						}
					})
				}
			})

			$tweenEffect(divs[0],{
				attr: 'top',
				end: 0,
				dur: conTime,
				endFun: function() {
					$tweenEffect(divs[1],{
						attr: 'left',
						end: 150,
						dur: conTime,
						endFun: function() {
							$tweenEffect(divs[2],{
								attr: 'top',
								end: 100,
								dur: conTime,
								endFun: function() {
									$tweenEffect(divs[3],{
										attr: 'left',
										end: 0,
										dur: conTime
									})
								}
							})
						}
					})
				}
			})
			$tweenEffect(divs[0],{
				attr: 'opacity',
				end: 1,
				dur: conTime,
				endFun: function() {
					$tweenEffect(divs[1],{
						attr: 'opacity',
						end: 1,
						dur: conTime,
						endFun: function() {
							$tweenEffect(divs[2],{
								attr: 'opacity',
								end: 1,
								dur: conTime,
								endFun: function() {
									$tweenEffect(divs[3],{
										attr: 'opacity',
										end: 1,
										dur: conTime,
										endFun: function() {
											$setStyle(div[0],'top',0);
											$setStyle(div[0],'left',0);
											$setStyle(div[1],'top',0);
											$setStyle(div[1],'left',150+'px');
											$setStyle(div[2],'top',100+'px');
											$setStyle(div[2],'left',0);
											$setStyle(div[3],'top',100+'px');
											$setStyle(div[3],'left',150+'px');
										}								
									})
								}
							})
						}
					})
				}
			})
		}
		function zeroSize() {
			console.log("OK")
			$setStyle(divs[0],'height',0);
			$setStyle(divs[1],'width',0);
			$setStyle(divs[2],'height',0);
			$setStyle(divs[3],'width',0);
		}
		function setSize() {

		}
		function hidePos() {
			$setStyle(divs[0],'top','150px');
			$setStyle(divs[1],'left','150px');
			$setStyle(divs[2],'top','100px');
			$setStyle(divs[3],'left','150px');
		}
		function setPos() {
			$setStyle(divs[0],'top',0);
			$setStyle(divs[0],'left',0);
			$setStyle(divs[1],'top',0);
			$setStyle(divs[1],'left',150+'px');
			$setStyle(divs[2],'top',100+'px');
			$setStyle(divs[2],'left',0);
			$setStyle(divs[3],'top',100+'px');
			$setStyle(divs[3],'left',150+'px');
		}
	</script>
</body>
</html>